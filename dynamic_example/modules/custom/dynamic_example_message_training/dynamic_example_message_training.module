<?php
/**
 * @file
 * Code for the Dynamic Example Message Training feature.
 */

include_once 'dynamic_example_message_training.features.inc';

/**
 * Implements hook_comment_insert().
 */
function dynamic_example_message_training_comment_insert($comment) {
  $account = user_load($comment->uid);
  $node = node_load($comment->nid);

  $message = message_create('example_create_comment', array(), $account);
  // Save reference to the node in the node reference field, and the
  // "publish" state (i.e. if the node is published or unpublished).
  $wrapper = entity_metadata_wrapper('message', $message);
  $wrapper->field_node_ref->set($node);
  $wrapper->field_comment_ref->set($comment);

  $wrapper->save();
}
